import { useState, useEffect } from 'react';
import { Line } from '@ant-design/plots';
import { Skeleton } from 'antd';
import request from './dashboard/request';
const defaultData = [
  {
    date: '2021-07-01',
    project: '413',
    stage: '414',
    stagename: 'Preparation',
    estimate: '176',
    consumed: '176',
  },
  {
    date: '2022-06-01',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '100',
  },
  {
    date: '2022-07-01',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '176',
  },
  {
    date: '2022-07-02',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '31',
  },
  {
    date: '2022-07-29',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '744',
  },
  {
    date: '2022-08-01',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '369',
  },
  {
    date: '2022-08-02',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '816',
  },
  {
    date: '2022-08-08',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '88',
  },
  {
    date: '2022-08-12',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '64',
  },
  {
    date: '2022-09-01',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '196',
  },
  {
    date: '2022-09-30',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '279',
  },
  {
    date: '2022-10-10',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '56',
  },
  {
    date: '2022-11-01',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-02',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-03',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-04',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-07',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-08',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-09',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-10',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-11',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-14',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-15',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-16',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-17',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-18',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-11-21',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '32',
  },
  {
    date: '2022-11-22',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '24',
  },
  {
    date: '2022-11-23',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '32',
  },
  {
    date: '2022-11-24',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '32',
  },
  {
    date: '2022-11-25',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '32',
  },
  {
    date: '2022-11-28',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '24',
  },
  {
    date: '2022-11-29',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '24',
  },
  {
    date: '2022-11-30',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '24',
  },
  {
    date: '2022-12-01',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '32',
  },
  {
    date: '2022-12-02',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '32',
  },
  {
    date: '2022-12-05',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-06',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-07',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-08',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-09',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-12',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-13',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-14',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-15',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-16',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-19',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-20',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-21',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-22',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-23',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-26',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-27',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-28',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-29',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-30',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '40',
  },
  {
    date: '2022-12-31',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '8',
  },
  {
    date: '2023-01-03',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '32',
  },
  {
    date: '2023-01-04',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '32',
  },
  {
    date: '2023-01-05',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '32',
  },
  {
    date: '2023-01-06',
    project: '413',
    stage: '419',
    stagename: 'FDC Modeling',
    estimate: '6293',
    consumed: '32',
  },
  {
    date: '2021-08-03',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '211',
  },
  {
    date: '2021-10-05',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '120',
  },
  {
    date: '2021-10-13',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '120',
  },
  {
    date: '2021-10-29',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '240',
  },
  {
    date: '2022-10-31',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '220',
  },
  {
    date: '2022-11-01',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '14',
  },
  {
    date: '2022-11-02',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '16',
  },
  {
    date: '2022-11-03',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '16',
  },
  {
    date: '2022-11-04',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '14',
  },
  {
    date: '2022-11-06',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '0',
  },
  {
    date: '2022-11-07',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '16',
  },
  {
    date: '2022-11-08',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-09',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-10',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-11',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-14',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-15',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-16',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-17',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-18',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-21',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-22',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-23',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-24',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-25',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-28',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-29',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-30',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-12-01',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '16',
  },
  {
    date: '2022-12-02',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '16',
  },
  {
    date: '2022-12-05',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '18',
  },
  {
    date: '2022-12-06',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '18',
  },
  {
    date: '2022-12-07',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '18',
  },
  {
    date: '2022-12-08',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '18',
  },
  {
    date: '2022-12-09',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '18',
  },
  {
    date: '2022-12-12',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '22',
  },
  {
    date: '2022-12-13',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '24',
  },
  {
    date: '2022-12-14',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '24',
  },
  {
    date: '2022-12-15',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '24',
  },
  {
    date: '2022-12-16',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '24',
  },
  {
    date: '2022-12-19',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '24',
  },
  {
    date: '2022-12-20',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '24',
  },
  {
    date: '2022-12-21',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '24',
  },
  {
    date: '2022-12-22',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '24',
  },
  {
    date: '2022-12-23',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '24',
  },
  {
    date: '2022-12-26',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '26',
  },
  {
    date: '2022-12-27',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '26',
  },
  {
    date: '2022-12-28',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '24',
  },
  {
    date: '2022-12-29',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '26',
  },
  {
    date: '2022-12-30',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '26',
  },
  {
    date: '2023-01-03',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '16',
  },
  {
    date: '2023-01-04',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '16',
  },
  {
    date: '2023-01-05',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '16',
  },
  {
    date: '2023-01-06',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '16',
  },
  {
    date: '2023-01-09',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2023-01-10',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2023-01-11',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2023-01-12',
    project: '413',
    stage: '420',
    stagename: 'ACP Modeling',
    estimate: '1911',
    consumed: '8',
  },
  {
    date: '2022-11-01',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '2',
  },
  {
    date: '2022-11-02',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-03',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-04',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-07',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-08',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-09',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-10',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-11',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-14',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-15',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-16',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-17',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-18',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-21',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-22',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-23',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-24',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-25',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-28',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-29',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '3',
  },
  {
    date: '2022-11-30',
    project: '413',
    stage: '421',
    stagename: 'APC Training for User',
    estimate: '140',
    consumed: '7',
  },
  {
    date: '2022-08-15',
    project: '413',
    stage: '422',
    stagename: 'FDC Training for User',
    estimate: '27',
    consumed: '3',
  },
  {
    date: '2022-09-01',
    project: '413',
    stage: '422',
    stagename: 'FDC Training for User',
    estimate: '27',
    consumed: '8',
  },
  {
    date: '2022-09-23',
    project: '413',
    stage: '422',
    stagename: 'FDC Training for User',
    estimate: '27',
    consumed: '8',
  },
  {
    date: '2022-10-12',
    project: '413',
    stage: '422',
    stagename: 'FDC Training for User',
    estimate: '27',
    consumed: '8',
  },
  {
    date: '2022-11-01',
    project: '413',
    stage: '423',
    stagename: 'APC Skill transfer for CIM',
    estimate: '352',
    consumed: '2',
  },
  {
    date: null,
    project: '413',
    stage: '424',
    stagename: 'FDC Skill transfer for CIM',
    estimate: '35',
    consumed: null,
  },
];
export const MultiLineChart = ({ dataInfo }: any) => {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    setLoading(true);
    const getDetail = async (project: string) => {
      try {
        const res: any = await request.post('/zzyDashboard-d1d2', { project });
        let total: any = {};
        const dataInfos: any = res
          ? (res?.data || []).map((item: any) => {
              if (!total[item?.stagename]) {
                total[item?.stagename] = Number(item?.consumed || 0);
              } else {
                total[item?.stagename] += Number(item?.consumed || 0);
              }

              return {
                date: item?.date,
                stagename: item?.stagename,
                value: Number(item?.estimate || 0) - total[item?.stagename],
              };
            })
          : [];
        setData(dataInfos);
      } catch (error) {
        console.error(error);
        let total: any = {};
        const dataInfos: any = defaultData.map((item: any) => {
          if (!total[item.stagename]) {
            total[item.stagename] = Number(item.consumed);
          } else {
            total[item.stagename] += Number(item.consumed);
          }

          return {
            date: item.date,
            stagename: item.stagename,
            value: Number(item.estimate) - total[item.stagename],
          };
        });
        setData(dataInfos);
        setData([]);
      }
      setLoading(false);
    };
    if (dataInfo) {
      getDetail(dataInfo[0]?.id);
    }
  }, [dataInfo]);
  const config = {
    data,
    xField: 'date',
    yField: 'value',
    autoFit: true,
    seriesField: 'stagename',
    xAxis: {
      type: 'time',
    },
    slider: {
      start: 0.1,
      end: 0.5,
    },
    yAxis: {
      label: {
        // formatting values as thousands 1500=> 1,500
        formatter: (v: string) =>
          `${v}`.replace(/\d{1,3}(?=(\d{3})+$)/g, s => `${s},`),
      },
    },
    // point: {
    //   shape: () => {
    //     return 'circle';
    //   },
    // },
  };
  return !loading ? <Line {...config} /> : <Skeleton />;
};
